; Generated library definition (promoted from hermest output)

(include dune.inc)

; Code generation rule - regenerates OCaml from JSON lexicons
; Run: dune build @hermest-atproto to regenerate and promote

(rule
 (alias hermest-atproto)
 (mode
  (promote (until-clean)))
 (deps
  (source_tree json))
 (targets dune.inc atp_lexicon_atproto.ml atp_lexicon_atproto.mli)
 (action
  (run
   %{bin:hermest}
   generate
   json
   -o
   .
   -m
   Atp_lexicon_atproto
   -p
   atp-lexicon-atproto)))
