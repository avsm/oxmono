{
  "name": "re",
  "git_commit": "ca087e398f28a83d5ac0c1f41bf194412dcbd5ba",
  "change_type": "oxcaml",
  "summary": "Add OxCaml portable/mode annotations for thread-safe concurrent regex matching",
  "details": "- **OxCaml type annotations**: Added `@@ portable` module annotations and jkind annotations (`type t : immutable_data`, `type t : mutable_data`, `type t : immediate`) throughout the codebase to enable data-race-free parallelism\n- **Mode crossing attributes**: Added `[@@unsafe_allow_any_mode_crossing]` to types with mutable fields that use double-checked locking for thread safety (e.g., `State.t`, `Marks.t`, `re`)\n- **Portable data structures**: Changed `Hashtbl.Make` to `Hashtbl.MakePortable`, `Set.Make` to `Set.MakePortable`, `Map.Make` to `Map.MakePortable` for thread-safe concurrent access\n- **Iarray usage**: Added new `Iarray` module for immutable arrays, converted `Mark_infos.t` from mutable `int array` to immutable `int iarray`\n- **Dense_map portability**: Rewrote to use `Iarray` for portable function memoization\n- **Runtime-conditional Mutex**: Added a `Mutex` module that is a no-op on runtime4 (for js_of_ocaml compatibility) but real on runtime5\n- **Obj.magic_uncontended**: Used `Stdlib.Obj.magic_uncontended` for initialization of transition tables to satisfy contention checking\n- **Bug fix for exec_partial**: Fixed `exec_partial` to correctly return `Full` instead of `Partial` when a pattern fully matches at end of input without groups\n- **Test updates**: Updated concurrency tests to remove TSAN suppressions (no longer needed with proper mode annotations), added new tests for exec_partial consistency\n- **Build changes**: Downgraded dune lang from 3.15 to 3.12, added `seq` dependency, removed `js_of_ocaml` test dependency, enabled benchmarks in CI\n- **Perl parser refactoring**: Inlined character class definitions to avoid portability issues with module-level values"
}